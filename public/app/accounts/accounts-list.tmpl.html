<!-- Include Nav Bar -->
<div ng-include="'app/navigation/nav-bar.tmpl.html'"></div>


<!-- Setup grid row in fluid container -->
<div class="container-fluid">
   <div class="row">
      <div class="col-sm-10 col-sm-offset-1 main">

         <!-- START CONTENT AREA =============== -->
         <h3 class="content-header">
            <span class="glyphicon glyphicon-user" aria-hidden="true"></span>
            &nbsp {{ctrl.itemCount}} Accounts

            <!-- Header buttons -->
            <div class="btn-group pull-right">
               <!--
               <a class="btn btn-primary btn-sm" href="#/accounts/create" role="button" >
                  <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                  New
               </a>
               -->
               <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                  Bulk Actions
                  <span class="caret"></span>
               </button>
               <ul class="dropdown-menu" role="menu">
                  <li><a href="" ng-click="ctrl.setSelectionStatus('DISABLED')">Disable Selected</a></li>
                  <li><a href="" ng-click="ctrl.setSelectionStatus('ENABLED')">Enable Selected</a></li>
                  <li class="divider"></li>
                  <li><a href="" ng-click="ctrl.deleteSelection()">Delete Selected</a></li>
               </ul>

            </div>
         </h3>

         <div class="table-responsive">
            <table class="table table-hover table-condensed">
               <thead>
                  <tr>
                     <th>
                        <a role="button" ng-click="ctrl.selectAll(ctrl.nextCheckAll)">
                           <span class="glyphicon glyphicon-check" aria-hidden="true"></span>
                        </a>
                     </th>
                     <th>Name</th>
                     <th>Email</th>
                     <th>Status</th>
                     <th>Actions</th>
                  </tr>
               </thead>
               <tbody>
                  <!-- ======== ng-repeat LOOP start ========== -->
                  <tr ng-repeat="account in ctrl.items">
                     <td>
                        <input type="checkbox" ng-model="account.selected">
                     </td>
                     <td>
                        <a class="btn btn-sm" ng-href="#/accounts/detail/{{account._id}}" role="button">
                           <span id="table-row-icon" class="glyphicon glyphicon-user" aria-hidden="true"></span> {{account.givenName + " " + account.surname}}
                        </a>
                     </td>
                     <td>{{account.email}}
                     </td>
                     <td ng-switch="account.status">
                        <span ng-switch-when="ENABLED" id="Enabled-OK-Sign" class="glyphicon glyphicon-ok-sign"></span>
                        <span ng-switch-when="DISABLED" id="Disabled-Remove-Sign" class="glyphicon glyphicon-remove-sign"></span>
                        {{account.status}}
                     </td>
                     <td>

                        <span class="dropdown">
                           <a id="drop1" href="" class="dropdown-toggle btn btn-sm" data-toggle="dropdown" aria-haspopup="true" role="button" aria-expanded="false">
                              <span class="glyphicon glyphicon-chevron-down"></span>
                           </a>
                           <ul class="dropdown-menu pull-right" role="menu" aria-labelledby="drop1" ng-switch="account.status">
                              <li role="presentation"><a role="menuitem" tabindex="-1" href="" ng-switch-when="DISABLED" ng-click="ctrl.setItemStatus(account._id, $index, 'ENABLED')">Enable</a></li>
                              <li role="presentation"><a role="menuitem" tabindex="-1" href="" ng-switch-when="ENABLED" ng-click="ctrl.setItemStatus(account._id, $index, 'DISABLED')">Disable</a></li>
                              <li role="presentation"><a role="menuitem" tabindex="-1" href="" ng-click="ctrl.editItem(account._id)">Edit</a>
                              </li>
                              <li role="presentation"><a role="menuitem" tabindex="-1" href="" ng-click="ctrl.deleteItem(account._id, $index)">Delete Account</a>
                              </li>
                              <li role="presentation"><a role="menuitem" tabindex="-1" href="">Reset Password</a>
                              </li>
                              <li role="presentation"><a role="menuitem" tabindex="-1" href="">Resend Verification Email</a>
                              </li>
                              <li role="presentation" class="divider"></li>
                              <li role="presentation"><a role="menuitem" tabindex="-1" href="">Add to Group</a>
                              </li>
                              <li role="presentation"><a role="menuitem" tabindex="-1" href="">Remove from Group</a>
                              </li>
                           </ul>
                        </span>

                     </td>
                  </tr>
               </tbody>
            </table>
         </div>

         <!-- END CONTENT AREA ================= -->
      </div>
   </div>
   <!-- END Row -->
</div>
<!-- END container-flud -->
